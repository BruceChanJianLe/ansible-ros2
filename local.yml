- hosts: localhost
  vars:
    ros2_gpg_key_url: "https://raw.githubusercontent.com/ros/rosdistro/master/ros.key"
    ros2_repository_url: "http://packages.ros.org/ros2/ubuntu"
    # Options: bouncy; crystal; dashing (LTS); eloquent; foxy (LTS)
    ros2_distribution: jazzy
    # Options: desktop (recommended); ros-base (bare bones)
    ros2_configuration: desktop
    only_zsh_patch: false
    zsh_tab_completion: false

  pre_tasks:
  - name: Update Apt
    become: true
    apt:
      upgrade: no
      force_apt_get: true
      update_cache: true
      cache_valid_time: 86400 #One day
      state: present
    tags:
      - setup

  tasks:
    - include_tasks: tasks/ros2-install.yml
      when: only_zsh_patch == 'false'
    - include_tasks: tasks/ros2-zsh-tab-completion.yml
      when: zsh_tab_completion == 'true'
